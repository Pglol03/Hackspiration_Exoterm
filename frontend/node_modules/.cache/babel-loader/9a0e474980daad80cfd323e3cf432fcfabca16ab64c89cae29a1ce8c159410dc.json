{"ast":null,"code":"import React, { useState, useEffect } from 'react';\nvar styles = {\n  \"alertDangerContainer\": \"_1alIC\",\n  \"alertDangerHeading\": \"_nqCmj\",\n  \"alertDangerInfo\": \"_2Qem8\"\n};\nvar Alert = function Alert(_ref) {\n  var txtMainHeading = _ref.txtMainHeading,\n    customClassName = _ref.customClassName,\n    txtSubHeading = _ref.txtSubHeading,\n    alertStyles = _ref.alertStyles;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: alertStyles.alertDangerContainer + \" \" + customClassName\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: alertStyles.alertDangerHeading\n  }, txtMainHeading), /*#__PURE__*/React.createElement(\"span\", {\n    className: alertStyles.alertDangerInfo\n  }, txtSubHeading));\n};\nvar ReactInternetSpeedMeter = function ReactInternetSpeedMeter(_ref) {\n  var _ref$txtMainHeading = _ref.txtMainHeading,\n    txtMainHeading = _ref$txtMainHeading === void 0 ? 'Opps...' : _ref$txtMainHeading,\n    _ref$outputType = _ref.outputType,\n    outputType = _ref$outputType === void 0 ? 'alert' : _ref$outputType,\n    customClassName = _ref.customClassName,\n    _ref$pingInterval = _ref.pingInterval,\n    pingInterval = _ref$pingInterval === void 0 ? 30000 : _ref$pingInterval,\n    _ref$thresholdUnit = _ref.thresholdUnit,\n    thresholdUnit = _ref$thresholdUnit === void 0 ? 'megabyte' : _ref$thresholdUnit,\n    _ref$threshold = _ref.threshold,\n    threshold = _ref$threshold === void 0 ? 7 : _ref$threshold,\n    _ref$txtSubHeading = _ref.txtSubHeading,\n    txtSubHeading = _ref$txtSubHeading === void 0 ? 'Diconnected from internet' : _ref$txtSubHeading,\n    imageUrl = _ref.imageUrl,\n    downloadSize = _ref.downloadSize,\n    _ref$callbackFunction = _ref.callbackFunctionOnNetworkDown,\n    callbackFunctionOnNetworkDown = _ref$callbackFunction === void 0 ? function () {\n      return console.log('No callback on Network Down');\n    } : _ref$callbackFunction,\n    _ref$callbackFunction2 = _ref.callbackFunctionOnNetworkTest,\n    callbackFunctionOnNetworkTest = _ref$callbackFunction2 === void 0 ? function () {\n      return console.log('No callback On Network test');\n    } : _ref$callbackFunction2,\n    _ref$callbackFunction3 = _ref.callbackFunctionOnError,\n    callbackFunctionOnError = _ref$callbackFunction3 === void 0 ? function () {\n      return console.log('error in downloading image');\n    } : _ref$callbackFunction3;\n  var _useState = useState(false),\n    isNetworkDown = _useState[0],\n    setisNetworkDown = _useState[1];\n  var intervalFun;\n  window.addEventListener('offline', function () {\n    return setisNetworkDown(true);\n  });\n  window.addEventListener('online', function () {\n    return setisNetworkDown(false);\n  });\n  var startCalculating = function startCalculating() {\n    return window.setTimeout(MeasureConnectionSpeed, pingInterval);\n  };\n  useEffect(function () {\n    intervalFun = startCalculating();\n    return function () {\n      return window.clearInterval(intervalFun);\n    };\n  }, []);\n  var MeasureConnectionSpeed = function MeasureConnectionSpeed() {\n    var startTime, endTime;\n    var download = new Image();\n    startTime = new Date().getTime();\n    var cacheBuster = '?nnn=' + startTime;\n    download.src = imageUrl + cacheBuster;\n    download.onload = function (d) {\n      endTime = new Date().getTime();\n      showResults(startTime, endTime);\n    };\n    download.onerror = function (err, msg) {\n      console.log('err', err);\n      callbackFunctionOnError(err);\n      window.clearInterval(intervalFun);\n    };\n    startCalculating();\n  };\n  var showResults = function showResults(startTime, endTime) {\n    var duration = (endTime - startTime) / 1000;\n    var bitsLoaded = downloadSize * 8;\n    var speedBps = (bitsLoaded / duration).toFixed(2);\n    var speedKbps = (speedBps / 1024).toFixed(2);\n    var speedMbps = (speedKbps / 1024).toFixed(2);\n    setNetworStatus(speedBps, speedKbps, speedMbps);\n  };\n  var setNetworStatus = function setNetworStatus(speedBps, speedKbps, speedMbps) {\n    if (thresholdUnit === 'byte') {\n      if (speedBps < threshold) {\n        setisNetworkDown(true);\n        callbackFunctionOnNetworkDown(speedBps);\n      } else {\n        setisNetworkDown(false);\n      }\n      callbackFunctionOnNetworkTest(speedBps);\n    } else if (thresholdUnit === 'kilobyte') {\n      if (speedKbps < threshold) {\n        setisNetworkDown(true);\n        callbackFunctionOnNetworkDown(speedKbps);\n      } else {\n        setisNetworkDown(false);\n      }\n      callbackFunctionOnNetworkTest(speedKbps);\n    } else if (thresholdUnit === 'megabyte') {\n      if (speedMbps < threshold) {\n        setisNetworkDown(true);\n        callbackFunctionOnNetworkDown(speedMbps);\n      } else {\n        setisNetworkDown(false);\n      }\n      callbackFunctionOnNetworkTest(speedMbps);\n    } else {\n      console.log('Invalid thresholdUnit');\n    }\n  };\n  if (isNetworkDown) {\n    if (outputType === 'alert') {\n      return /*#__PURE__*/React.createElement(Alert, {\n        alertStyles: styles,\n        customClassName: customClassName,\n        txtMainHeading: txtMainHeading,\n        txtSubHeading: txtSubHeading\n      });\n    }\n    return /*#__PURE__*/React.createElement(\"div\", null);\n  }\n  return /*#__PURE__*/React.createElement(\"div\", null);\n};\nexport { ReactInternetSpeedMeter };","map":{"version":3,"names":["Alert","_ref","txtMainHeading","customClassName","txtSubHeading","alertStyles","React","createElement","className","alertDangerContainer","alertDangerHeading","alertDangerInfo","ReactInternetSpeedMeter","_ref$txtMainHeading","_ref$outputType","outputType","_ref$pingInterval","pingInterval","_ref$thresholdUnit","thresholdUnit","_ref$threshold","threshold","_ref$txtSubHeading","imageUrl","downloadSize","_ref$callbackFunction","callbackFunctionOnNetworkDown","console","log","_ref$callbackFunction2","callbackFunctionOnNetworkTest","_ref$callbackFunction3","callbackFunctionOnError","_useState","useState","isNetworkDown","setisNetworkDown","intervalFun","window","addEventListener","startCalculating","setTimeout","MeasureConnectionSpeed","useEffect","clearInterval","startTime","endTime","download","Image","Date","getTime","cacheBuster","src","onload","d","showResults","onerror","err","msg","duration","bitsLoaded","speedBps","toFixed","speedKbps","speedMbps","setNetworStatus","styles"],"sources":["D:\\Hackspiration_Exoterm\\frontend\\node_modules\\react-internet-meter\\src\\components\\alerts\\index.js","D:\\Hackspiration_Exoterm\\frontend\\node_modules\\react-internet-meter\\src\\index.js"],"sourcesContent":["import React from 'react' \n\n\nconst Alert = ({txtMainHeading,customClassName,txtSubHeading,alertStyles}) => {\n    return (\n        <div className={`${alertStyles.alertDangerContainer} ${customClassName}`}>\n            <span className={alertStyles.alertDangerHeading}>{txtMainHeading}</span>\n            <span className={alertStyles.alertDangerInfo}>{txtSubHeading}</span>\n        </div>\n    )\n}\n\n\nexport {\n    Alert\n}","import React, { useEffect, useState } from 'react'\nimport styles from './styles.module.css'\n\nimport { Alert } from './components'\n\nexport const ReactInternetSpeedMeter = ({\n  txtMainHeading = 'Opps...',\n  outputType = 'alert',\n  customClassName,\n  pingInterval = 30000,\n  thresholdUnit = 'megabyte',\n  threshold = 7,\n  txtSubHeading = 'Diconnected from internet',\n  imageUrl,\n  downloadSize, //bytes\n  callbackFunctionOnNetworkDown = () => console.log('No callback on Network Down'),\n  callbackFunctionOnNetworkTest = () => console.log('No callback On Network test'),\n  callbackFunctionOnError = () => console.log('error in downloading image')\n}) => {\n  const [isNetworkDown, setisNetworkDown] = useState(false)\n  let intervalFun\n\n  window.addEventListener('offline', () => setisNetworkDown(true));\n  window.addEventListener('online', () => setisNetworkDown(false));\n\n  const startCalculating = () => {\n    return window.setTimeout(MeasureConnectionSpeed, pingInterval);\n  }\n\n  useEffect(() => {\n    intervalFun = startCalculating()\n    return () => window.clearInterval(intervalFun)\n  }, [])\n\n  const MeasureConnectionSpeed = () => {\n    var startTime, endTime;\n    var download = new Image();\n    startTime = (new Date()).getTime();\n\n    var cacheBuster = '?nnn=' + startTime;\n    download.src = imageUrl + cacheBuster;\n\n    download.onload = function (d) {\n      endTime = (new Date()).getTime();\n      showResults(startTime, endTime);\n    }\n\n    download.onerror = function (err, msg) {\n      console.log('err', err)\n      callbackFunctionOnError(err)\n      window.clearInterval(intervalFun)\n    }\n    startCalculating()\n  }\n\n  const showResults = (startTime, endTime) => {\n    const duration = (endTime - startTime) / 1000;\n\n    const bitsLoaded = downloadSize * 8;\n    const speedBps = (bitsLoaded / duration).toFixed(2);\n    const speedKbps = (speedBps / 1024).toFixed(2);\n    const speedMbps = (speedKbps / 1024).toFixed(2);\n\n    setNetworStatus(speedBps, speedKbps, speedMbps)\n  }\n\n  const setNetworStatus = (speedBps, speedKbps, speedMbps) => {\n    if (thresholdUnit === 'byte') {\n      if (speedBps < threshold) {\n        setisNetworkDown(true)\n        callbackFunctionOnNetworkDown(speedBps)\n      } else {\n        setisNetworkDown(false)\n      }\n      callbackFunctionOnNetworkTest(speedBps)\n    }\n    else if (thresholdUnit === 'kilobyte') {\n      if (speedKbps < threshold) {\n        setisNetworkDown(true)\n        callbackFunctionOnNetworkDown(speedKbps)\n      } else {\n        setisNetworkDown(false)\n      }\n      callbackFunctionOnNetworkTest(speedKbps)\n\n    }\n    else if (thresholdUnit === 'megabyte') {\n      if (speedMbps < threshold) {\n        setisNetworkDown(true)\n        callbackFunctionOnNetworkDown(speedMbps)\n      } else {\n        setisNetworkDown(false)\n      }\n      callbackFunctionOnNetworkTest(speedMbps)\n\n    }\n    else {\n      console.log('Invalid thresholdUnit')\n    }\n  }\n\n  if (isNetworkDown) {\n    if (outputType === 'alert') {\n      return <Alert\n        alertStyles={styles}\n        customClassName={customClassName}\n        txtMainHeading={txtMainHeading}\n        txtSubHeading={txtSubHeading} />\n    }\n\n    return <div />\n  }\n  return <div />\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}